import requests
import random

class ArtsyAPI:
    def __init__(self, client_id, client_secret):
        self.client_id = client_id
        self.client_secret = client_secret
        self.token = self.get_token()

    def get_token(self):
        url = "https://api.artsy.net/api/tokens/xapp_token"
        data = {
            "client_id": self.client_id,
            "client_secret": self.client_secret
        }
        response = requests.post(url, data=data)
        response.raise_for_status()
        return response.json()["token"]

    def get_artworks(self):
        url = "https://api.artsy.net/api/artworks"
        headers = {
            "X-Xapp-Token": self.token
        }
        response = requests.get(url, headers=headers)
        response.raise_for_status()
        return response.json()["_embedded"]["artworks"]

class RandomImageDownloader:
    def __init__(self, artsy_api):
        self.artsy_api = artsy_api

    def download_random_image(self):
        artworks = self.artsy_api.get_artworks()
        random_artwork = random.choice(artworks)
        image_url = random_artwork["image_versions"][0]
        image_response = requests.get(image_url)
        image_response.raise_for_status()
        with open("random_image.jpg", "wb") as file:
            file.write(image_response.content)
        print("Image downloaded:", image_url)

# Usage
client_id = "your_client_id"
client_secret = "your_client_secret"
artsy_api = ArtsyAPI(client_id, client_secret)
downloader = RandomImageDownloader(artsy_api)
downloader.download_random_image()
